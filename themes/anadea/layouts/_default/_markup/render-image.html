{{- $image := .Page.Resources.GetMatch (printf "*%s*" (.Destination | safeURL)) -}}
{{- $src := ($image.Process "webp").RelPermalink -}}

<img
  src="{{ $src }}"
  width="{{ $image.Width }}"
  height="{{ $image.Height }}"
  alt="{{ .Text }}"
  loading="lazy"
  decoding="async"
  srcset="
    {{- with site.Params.params.deviceSizes -}}
      {{- range $i, $e := . -}}
        {{- if ge $image.Width . -}}
          {{- if $i }},{{ end -}}
          {{- ($image.Resize (print . `x webp`) ).RelPermalink }} {{ . }}w
        {{- end -}}
      {{- end -}}
    {{- end -}}
  "
  sizes="(min-width: 992px) 660px, 100vw"
/>
